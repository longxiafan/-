# 实施计划

- [x] 1. 创建项目结构和核心接口


  - 创建目录结构：ai/、frontend/、根目录文件
  - 定义数据模型和接口类型
  - _需求: 4.1, 5.1_



- [ ] 2. 实现AI推理模块
  - [ ] 2.1 创建ai/inference.py推理核心功能
    - 实现classify_image(image_path)函数，加载weights.pt模型
    - 函数返回格式：[("label", confidence), ...]的元组列表
    - 添加YOLOv8模型加载和图片推理功能
    - 实现错误处理和异常管理
    - _需求: 4.2, 4.4_

  - [ ] 2.2 添加推理模块的单元测试
    - 编写推理功能的测试用例
    - 测试模型加载和预测流程
    - 验证输出格式和置信度范围

    - _需求: 4.2_

- [ ] 3. 创建FastAPI后端服务
  - [x] 3.1 实现main.py的FastAPI应用和/api/predict端点

    - 创建FastAPI应用实例和CORS配置
    - 实现POST /api/predict端点接收multipart/form-data
    - 集成ai/inference.py模块进行图片分类
    - 返回JSON格式的类别和置信度结果
    - _需求: 4.1, 4.3, 4.5_

  - [ ] 3.2 添加文件验证和错误处理
    - 实现图片文件格式和大小验证
    - 添加API错误处理和HTTP状态码返回
    - 实现异常捕获和错误响应格式化
    - _需求: 3.1, 3.2, 3.4_

  - [ ] 3.3 创建API端点的单元测试
    - 编写/api/predict端点的测试用例
    - 测试文件上传和响应格式
    - 验证错误处理和状态码
    - _需求: 4.1, 4.3_

- [ ] 4. 实现Streamlit前端界面
  - [x] 4.1 创建frontend/app.py的基础界面


    - 实现Streamlit文件上传控件
    - 创建用户界面布局和标题
    - 添加基本的页面结构
    - _需求: 5.1, 5.2_

  - [ ] 4.2 实现图片上传和API调用功能
    - 集成文件上传控件与后端API调用
    - 实现向/api/predict端点发送POST请求
    - 添加上传进度指示和状态反馈
    - _需求: 5.3, 5.4_

  - [ ] 4.3 添加结果展示和可视化
    - 实现检测结果的显示界面
    - 创建置信度分数的条形图可视化
    - 显示检测到的垃圾类别和置信度
    - _需求: 5.5, 5.6_

  - [ ] 4.4 实现前端错误处理和用户反馈
    - 添加API连接错误的处理
    - 实现文件格式错误的用户提示
    - 添加服务不可用时的友好消息
    - _需求: 3.3, 6.2_

- [ ] 5. 集成测试和部署准备
  - [x] 5.1 创建端到端集成测试




    - 编写完整流程的集成测试
    - 测试前端到后端的完整数据流
    - 验证图片上传到结果显示的全流程
    - _需求: 1.1, 1.3, 1.4_

  - [x] 5.2 添加部署配置文件



    - 创建requirements.txt文件（前端和后端）
    - 配置Render部署的配置文件
    - 添加Streamlit部署的配置文件
    - _需求: 4.4_

  - [ ] 5.3 优化性能和用户体验
    - 优化图片处理和推理速度
    - 改进界面响应性和加载体验
    - 添加适当的缓存和优化策略
    - _需求: 6.1, 6.3_